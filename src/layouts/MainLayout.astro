---
/**
 * ä¸»å¸ƒå±€ç»„ä»¶
 * æä¾›å…¨å±€å¸ƒå±€ç»“æ„
 */
import SEO from '../components/SEO.astro';
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  keywords?: string;
  image?: string;
  noindex?: boolean;
}

const {
  title = 'æ¥è§¦å¼ä¸‰æ¢å¤´ç£æ£€æµ‹è½¯ä»¶',
  description = 'ä¸“ä¸šçš„å·¥ä¸šç£ç²‰æ£€æµ‹ç³»ç»Ÿ',
  keywords,
  image,
  noindex = false,
} = Astro.props;

const fullTitle = title.includes('ç£æ£€æµ‹') ? title : `${title} - æ¥è§¦å¼ä¸‰æ¢å¤´ç£æ£€æµ‹è½¯ä»¶`;
---

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <SEO
      title={fullTitle}
      description={description}
      keywords={keywords}
      image={image}
      noindex={noindex}
    />
  </head>
  <body itemscope itemtype="https://schema.org/WebApplication">
    <div class="min-h-screen flex flex-col bg-bg-primary text-text-primary">
      <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
      <header class="h-20 bg-bg-secondary border-b-2 border-border flex items-center px-6" role="banner">
        <div class="flex items-center gap-6 w-full">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-accent-primary rounded flex items-center justify-center text-bg-primary font-bold text-xl">
              M
            </div>
            <div>
              <h1 class="text-xl font-bold">ç£æ£€æµ‹ç³»ç»Ÿ</h1>
              <p class="text-xs text-text-secondary">ä¸‰æ¢å¤´ç£ç²‰æ£€æµ‹</p>
            </div>
          </div>
          
          <div class="flex-1 flex items-center justify-center gap-6">
            <div class="flex items-center gap-2">
              <span class="status-indicator status-online"></span>
              <span class="text-sm">æ¢å¤´1: åœ¨çº¿</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="status-indicator status-online"></span>
              <span class="text-sm">æ¢å¤´2: åœ¨çº¿</span>
            </div>
            <div class="flex items-center gap-2">
              <span class="status-indicator status-online"></span>
              <span class="text-sm">æ¢å¤´3: åœ¨çº¿</span>
            </div>
            <div class="text-sm">
              <span class="text-text-secondary">å¢ç›Š:</span>
              <span class="text-accent-primary font-semibold ml-1">45.5 dB</span>
            </div>
            <div class="text-sm">
              <span class="text-text-secondary">é¢‘ç‡:</span>
              <span class="text-accent-primary font-semibold ml-1">5.0 MHz</span>
            </div>
          </div>
          
          <div class="flex items-center gap-4">
            <span class="text-sm text-text-secondary">æ“ä½œå‘˜: æå·¥</span>
            <button class="btn-secondary btn-sm">è®¾ç½®</button>
          </div>
        </div>
      </header>
      
      <!-- ä¸»å†…å®¹åŒº -->
      <main class="flex-1 flex overflow-hidden" role="main" itemprop="mainContentOfPage">
        <!-- å·¦ä¾§åŠŸèƒ½æŒ‰é’®åŒº -->
        <aside class="w-24 bg-bg-secondary border-r-2 border-border flex flex-col py-4 gap-2" role="navigation" aria-label="ä¸»å¯¼èˆªèœå•">
          <a href="/" class="btn-primary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-2xl">ğŸ“Š</span>
            <span class="text-xs">DISP</span>
          </a>
          <a href="/workpiece" class="btn-secondary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-2xl">ğŸ¯</span>
            <span class="text-xs">å·¥ä»¶</span>
          </a>
          <a href="/parameters" class="btn-secondary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-2xl">âš™ï¸</span>
            <span class="text-xs">å‚æ•°</span>
          </a>
          <a href="/history" class="btn-secondary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-2xl">ğŸ“œ</span>
            <span class="text-xs">å†å²</span>
          </a>
        </aside>
        
        <!-- ä¸­å¤®å†…å®¹åŒº -->
        <div class="flex-1 bg-bg-primary overflow-auto">
          <slot />
        </div>
        
        <!-- å³ä¾§æ“ä½œæŒ‰é’®åŒº -->
        <aside class="w-24 bg-bg-secondary border-l-2 border-border flex flex-col py-4 gap-2">
          <button class="btn-secondary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-2xl">â†©ï¸</span>
          </button>
          <button class="btn-primary mx-2 aspect-square flex flex-col items-center justify-center gap-1" onclick="saveRecord()">
            <span class="text-xs">SAVE</span>
          </button>
          <button class="btn-secondary mx-2 aspect-square flex flex-col items-center justify-center gap-1">
            <span class="text-xs">MENU</span>
          </button>
        </aside>
      </main>
      
      <!-- åº•éƒ¨æ§åˆ¶æ  -->
      <footer class="h-16 bg-bg-secondary border-t-2 border-border flex items-center justify-center px-6 gap-4" role="contentinfo">
        <a href="/workpiece" class="btn-secondary">å·¥ä»¶ç®¡ç†</a>
        <a href="/parameters" class="btn-secondary">å‚æ•°é…ç½®</a>
        <a href="/history" class="btn-secondary">å†å²è®°å½•</a>
        <a href="/reports" class="btn-secondary">æŠ¥å‘Šç®¡ç†</a>
        <div class="flex-1"></div>
        <button class="btn-primary" data-action="start" onclick="window.startDetection && window.startDetection()">å¼€å§‹æ£€æµ‹</button>
        <button class="btn-danger" data-action="stop" onclick="window.stopDetection && window.stopDetection()">åœæ­¢</button>
      </footer>
    </div>
    
    <script>
      // å…¨å±€å‡½æ•°
      (window as any).saveRecord = () => {
        alert('ä¿å­˜åŠŸèƒ½ï¼šå°†å½“å‰æ£€æµ‹æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“');
      };
    </script>
  </body>
</html>